# Design: AI 风格推荐前置步骤

**Date:** 2026-02-27
**Scope:** `scripts/generate-ui.js`

## 需求

在用户输入风格描述之前，先让 AI 分析文章内容，推荐合适的整体视觉风格。用户可直接回车接受推荐，也可修改后继续。

## 设计

### 新增函数 `recommendStyle(post)`

调用 OpenAI API（同 `OPENAI_MODEL`），输入文章标题、分类、摘要和正文，要求 AI 输出两部分：
1. 一段简短的风格分析解释（为什么推荐这个风格）
2. 一行可直接使用的风格关键词

Prompt 极简，仅作分析用，不涉及布局细节。

### 交互流程变化

**原来（5/3 步）：**
```
[3/5] 构造 prompt...
> 风格描述（直接回车使用默认风格）: _
```

**改后（6/4 步）：**
```
[3/6] 分析文章风格...
─────────────────────────────────────────
【分析】这是一篇旅行游记，情绪轻松温暖……
【推荐】明信片风格、暖色调、手写感字体、大留白
─────────────────────────────────────────
> 风格描述（直接回车使用推荐风格，输入内容覆盖）: _
```

- 回车 → 使用推荐关键词
- 输入内容 → 使用用户输入（完全覆盖推荐）

### 步骤数调整

| 模式 | 原步骤数 | 新步骤数 |
|------|---------|---------|
| 默认（AI 生成） | 5 | 6 |
| `--file` | 3 | 4 |
| `--prompt-only` | 3 | 4 |

### `buildPrompt` 不变

`styleDesc` 的拼装逻辑保持不变，只是 `styleHint` 的来源从"纯用户输入"变成"推荐关键词 or 用户覆盖内容"。

### 分析用 Prompt 格式（目标输出）

```
【风格分析】
<一两句解释为什么推荐这个风格>

【推荐关键词】
<逗号分隔的关键词，可直接作为风格描述使用>
```

## 不涉及范围

- `buildPrompt` 逻辑不变
- Ghost 回写逻辑不变
- `.env` 无需新增变量
- 分析调用不保存到本地 preview
